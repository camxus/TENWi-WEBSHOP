(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[190],{4701:function(n,t,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/cart",function(){return e(9248)}])},9248:function(n,t,e){"use strict";e.r(t),e.d(t,{__N_SSG:function(){return N},default:function(){return I}});var a=e(5893),i=e(8394),r=e(1664),o=e(7294),l=e(6589),s=e(5413),d=e(5934),c=e(4921),u=function(n){var t=n.item,e=n.products,i=n.updateCartProcessing,r=n.handleRemoveProductClick,l=n.updateCart,u=(0,o.useState)(t.qty),p=u[0],v=u[1];return(0,a.jsxs)("tr",{className:"cart-item",children:[(0,a.jsx)("th",{className:"cart-element cart-el-close",children:(0,a.jsx)("span",{className:"cart-close-icon cursor-pointer",onClick:function(n){return r(n,t.cartKey,e)},children:(0,a.jsx)(c.X1,{})})}),(0,a.jsx)("td",{className:"cart-element",children:(0,a.jsx)("img",{width:"64",src:t.image.sourceUrl,srcSet:t.image.srcSet,alt:t.image.title})}),(0,a.jsx)("td",{className:"cart-element",children:t.name}),(0,a.jsx)("td",{className:"cart-element",children:"string"!==typeof t.price?t.price.toFixed(2):t.price}),(0,a.jsx)("td",{className:"cart-element cart-qty",children:(0,a.jsx)("input",{type:"number",min:"1","data-cart-key":t.cartKey,className:"cart-qty-input form-control ".concat(i?"opacity-25 cursor-not-allowed":""," "),value:p,onChange:function(n){return function(n,t){if(n.stopPropagation(),!i){var a=n.target.value?parseInt(n.target.value):1;if(v(a),e.length){var r=(0,s.zn)(e,a,t);l({variables:{input:{clientMutationId:(0,d.Z)(),items:r}}})}}}(n,t.cartKey)}})}),(0,a.jsx)("td",{className:"cart-element",children:"string"!==typeof t.totalPrice?t.totalPrice.toFixed(2):t.totalPrice})]},t.productId)},p=e(6829),v=e(1439);function m(){var n,t,e=(n=["\nmutation UPDATE_CART($input: UpdateItemQuantitiesInput!) {\n  updateItemQuantities(input: $input) {\n    items {\n      key\n      product {\n        node {\n          id\n          productId: databaseId\n          name\n          description\n          type\n          onSale\n          slug\n          averageRating\n          reviewCount\n          image {\n            id\n            sourceUrl\n            altText\n          }\n          galleryImages {\n            nodes {\n              id\n              sourceUrl\n              altText\n            }\n          }\n        }\n      }\n      variation {\n        node {\n          id\n          variationId: databaseId\n          name\n          description\n          type\n          onSale\n          price\n          regularPrice\n          salePrice\n          image {\n            id\n            sourceUrl\n            altText\n          }\n        }\n        attributes {\n          id\n          attributeId\n          name\n          value\n        }\n      }\n      quantity\n      total\n      subtotal\n      subtotalTax\n    }\n    removed {\n      key\n      product {\n        node {\n          id\n          productId: databaseId\n        }\n      }\n      variation {\n        node {\n          id\n          variationId: databaseId\n        }\n      }\n    }\n    updated {\n      key\n      product {\n        node {\n          id\n          productId: databaseId\n        }\n      }\n      variation {\n        node {\n          id\n          variationId: databaseId\n        }\n      }\n    }\n  }\n}\n"],t||(t=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(t)}})));return m=function(){return e},e}var h=(0,v.Ps)(m()),f=e(2321);function g(){var n,t,e=(n=["\nmutation CLEAR_CART_MUTATION( $input: RemoveItemsFromCartInput! ) {\n  removeItemsFromCart(input: $input) {\n    cartItems {\n      quantity\n    }\n  }\n}\n"],t||(t=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(t)}})));return g=function(){return e},e}var x=(0,v.Ps)(g()),y=e(6486);function b(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var e=[],a=!0,i=!1,r=void 0;try{for(var o,l=n[Symbol.iterator]();!(a=(o=l.next()).done)&&(e.push(o.value),!t||e.length!==t);a=!0);}catch(s){i=!0,r=s}finally{try{a||null==l.return||l.return()}finally{if(i)throw r}}return e}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var j=function(){var n=(0,o.useContext)(l.I),t=n[0],e=n[1],i=(0,o.useState)(null),c=i[0],v=i[1],m=(0,p.useQuery)(f.Z,{notifyOnNetworkStatusChange:!0,onCompleted:function(){var n=(0,s.W3)(g);localStorage.setItem("tenwi-cart",JSON.stringify(n)),e(n)}}),g=(m.loading,m.error,m.data),j=m.refetch,N=b((0,p.useMutation)(h,{onCompleted:function(){j()},onError:function(n){if(n){var t,e,a=(null===n||void 0===n||null===(t=n.graphQLErrors)||void 0===t||null===(e=t[0])||void 0===e?void 0:e.message)?n.graphQLErrors[0].message:"";v(a)}}}),2),I=N[0],w=N[1],P=(w.data,w.loading),C=(w.error,b((0,p.useMutation)(x,{onCompleted:function(){j()},onError:function(n){if(n){var t,e,a=(0,y.isEmpty)(null===n||void 0===n||null===(t=n.graphQLErrors)||void 0===t?void 0:t[0])?"":null===(e=n.graphQLErrors[0])||void 0===e?void 0:e.message;v(a)}}}),2)),T=C[0],S=C[1],k=(S.data,S.loading),_=(S.error,function(n,t,e){if(n.stopPropagation(),e.length){var a=(0,s.zn)(e,0,t);I({variables:{input:{clientMutationId:(0,d.Z)(),items:a}}})}});return(0,a.jsx)("div",{className:"cart product-cart-container container mx-auto my-32 px-4 xl:px-0",children:t?(0,a.jsxs)("div",{className:"cart-wrapper container",children:[(0,a.jsxs)("div",{className:"cart-header grid grid-cols-2 gap-4",children:[(0,a.jsx)("h1",{className:"text-2xl mb-5 uppercase",children:"Cart"}),(0,a.jsxs)("div",{className:"clear-cart text-right",children:[(0,a.jsxs)("button",{className:"px-4 py-1 bg-gray-500 text-white rounded-sm w-auto",onClick:function(n){return function(n){n.stopPropagation(),k||T({variables:{input:{clientMutationId:(0,d.Z)(),all:!0}}})}(n)},disabled:k,children:[(0,a.jsx)("span",{className:"cart",children:"Clear Cart"}),(0,a.jsx)("i",{className:"fa fa-arrow-alt-right"})]}),k?(0,a.jsx)("p",{children:"Clearing..."}):"",P?(0,a.jsx)("p",{children:"Updating..."}):null]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-4 gap-0 xl:gap-4 mb-5",children:[(0,a.jsxs)("table",{className:"cart-products table-auto col-span-3 mb-5",children:[(0,a.jsx)("thead",{className:"text-left",children:(0,a.jsxs)("tr",{className:"cart-head-container",children:[(0,a.jsx)("th",{className:"cart-heading-el",scope:"col"}),(0,a.jsx)("th",{className:"cart-heading-el",scope:"col"}),(0,a.jsx)("th",{className:"cart-heading-el",scope:"col",children:"Product"}),(0,a.jsx)("th",{className:"cart-heading-el",scope:"col",children:"Price"}),(0,a.jsx)("th",{className:"cart-heading-el",scope:"col",children:"Quantity"}),(0,a.jsx)("th",{className:"cart-heading-el",scope:"col",children:"Total"})]})}),(0,a.jsx)("tbody",{children:t.products.length&&t.products.map((function(n){return(0,a.jsx)(u,{item:n,updateCartProcessing:P,products:t.products,handleRemoveProductClick:_,updateCart:I},n.productId)}))})]}),(0,a.jsx)("div",{className:"row cart-total-container border p-5 bg-gray-200",children:(0,a.jsxs)("div",{className:"",children:[(0,a.jsx)("table",{className:"table table-hover mb-5",children:(0,a.jsx)("tbody",{children:(0,a.jsxs)("tr",{className:"table-light flex flex-col",children:[(0,a.jsx)("td",{className:"cart-element-total text-2xl font-normal",children:"Subtotal"}),(0,a.jsx)("td",{className:"cart-element-amt text-2xl font-bold",children:"string"!==typeof t.totalProductsPrice?t.totalProductsPrice.toFixed(2):t.totalProductsPrice})]})})}),(0,a.jsx)(r.default,{href:"/checkout",children:(0,a.jsxs)("button",{className:"bg-purple-600 text-white px-5 py-3 rounded-sm w-auto xl:w-full",children:[(0,a.jsx)("span",{className:"cart-checkout-txt",children:"Proceed to Checkout"}),(0,a.jsx)("i",{className:"fas fa-long-arrow-alt-right"})]})})]})})]}),c?(0,a.jsxs)("div",{className:"row cart-total-container mt-5",children:[" ",c," "]}):""]}):(0,a.jsxs)("div",{className:"container mx-auto my-32 px-4 xl:px-0",children:[(0,a.jsx)("h2",{className:"text-2xl mb-5",children:"No items in the cart"}),(0,a.jsx)(r.default,{href:"/",children:(0,a.jsxs)("button",{className:"bg-purple-600 text-white px-5 py-3 rounded-sm",children:[(0,a.jsx)("span",{className:"cart-checkout-txt",children:"Add New Products"}),(0,a.jsx)("i",{className:"fas fa-long-arrow-alt-right"})]})})]})})},N=!0,I=function(n){var t=n.categories,e=n.tags;return(0,a.jsx)(i.Z,{categories:t,tags:e,children:(0,a.jsx)(j,{})})}},5413:function(n,t,e){"use strict";e.d(t,{Qn:function(){return i},W3:function(){return r},Wj:function(){return o},zn:function(){return l}});var a=e(5934),i=function(n){var t=n.match(/[+-]?\d+(\.\d+)?/g)[0];return null!==t?parseFloat(parseFloat(t).toFixed(2)):""},r=function(n){var t,e=null;if(void 0===n||!n.cart.contents.nodes.length)return e;var a=n.cart.contents.nodes;(e={}).products=[];for(var r,o=0,l=0;l<a.length;l++){var s,d,c,u,p,v,m,h,f,g,x,y,b,j,N,I,w,P,C=null===a||void 0===a||null===(s=a[l])||void 0===s||null===(d=s.product)||void 0===d?void 0:d.node,T={},S=i(a[l].total);T.productId=null!==(x=null===C||void 0===C?void 0:C.productId)&&void 0!==x?x:"",T.cartKey=null!==(y=null===a||void 0===a||null===(c=a[l])||void 0===c?void 0:c.key)&&void 0!==y?y:"",T.name=null!==(b=null===C||void 0===C?void 0:C.name)&&void 0!==b?b:"",T.qty=null===a||void 0===a||null===(u=a[l])||void 0===u?void 0:u.quantity,T.price=S/(null===T||void 0===T?void 0:T.qty),T.totalPrice=null!==(j=null===a||void 0===a||null===(p=a[l])||void 0===p?void 0:p.total)&&void 0!==j?j:"",T.image={sourceUrl:null!==(N=null===C||void 0===C||null===(v=C.image)||void 0===v?void 0:v.sourceUrl)&&void 0!==N?N:"",srcSet:null!==(I=null===C||void 0===C||null===(m=C.image)||void 0===m?void 0:m.srcSet)&&void 0!==I?I:"",title:null!==(w=null===C||void 0===C||null===(h=C.image)||void 0===h?void 0:h.title)&&void 0!==w?w:"",altText:null!==(P=null===C||void 0===C||null===(f=C.image)||void 0===f?void 0:f.altText)&&void 0!==P?P:""},o+=null===a||void 0===a||null===(g=a[l])||void 0===g?void 0:g.quantity,e.products.push(T)}return e.totalProductsCount=o,e.totalProductsPrice=null!==(r=null===n||void 0===n||null===(t=n.cart)||void 0===t?void 0:t.total)&&void 0!==r?r:"",e},o=function(n){var t,e,i,r,o,l,s,d,c,u,p,v=n.billingDifferentThanShipping?n.billing:n.shipping,m={clientMutationId:(0,a.Z)(),shipping:{firstName:null===n||void 0===n||null===(t=n.shipping)||void 0===t?void 0:t.firstName,lastName:null===n||void 0===n||null===(e=n.shipping)||void 0===e?void 0:e.lastName,address1:null===n||void 0===n||null===(i=n.shipping)||void 0===i?void 0:i.address1,address2:null===n||void 0===n||null===(r=n.shipping)||void 0===r?void 0:r.address2,city:null===n||void 0===n||null===(o=n.shipping)||void 0===o?void 0:o.city,country:null===n||void 0===n||null===(l=n.shipping)||void 0===l?void 0:l.country,state:null===n||void 0===n||null===(s=n.shipping)||void 0===s?void 0:s.state,postcode:null===n||void 0===n||null===(d=n.shipping)||void 0===d?void 0:d.postcode,email:null===n||void 0===n||null===(c=n.shipping)||void 0===c?void 0:c.email,phone:null===n||void 0===n||null===(u=n.shipping)||void 0===u?void 0:u.phone,company:null===n||void 0===n||null===(p=n.shipping)||void 0===p?void 0:p.company},billing:{firstName:null===v||void 0===v?void 0:v.firstName,lastName:null===v||void 0===v?void 0:v.lastName,address1:null===v||void 0===v?void 0:v.address1,address2:null===v||void 0===v?void 0:v.address2,city:null===v||void 0===v?void 0:v.city,country:null===v||void 0===v?void 0:v.country,state:null===v||void 0===v?void 0:v.state,postcode:null===v||void 0===v?void 0:v.postcode,email:null===v||void 0===v?void 0:v.email,phone:null===v||void 0===v?void 0:v.phone,company:null===v||void 0===v?void 0:v.company},shipToDifferentAddress:n.billingDifferentThanShipping,paymentMethod:n.paymentMethod,isPaid:!1};return n.createAccount&&(m.account={username:n.username,password:n.password}),m},l=function(n,t,e){var a=[];return n.map((function(n){n.cartKey===e?a.push({key:n.cartKey,quantity:parseInt(t)}):a.push({key:n.cartKey,quantity:n.qty})})),a}},2321:function(n,t,e){"use strict";function a(){var n,t,e=(n=["\nquery GET_CART {\n  cart {\n    contents {\n      nodes {\n        key\n        product {\n          node {\n            id\n            productId: databaseId\n            name\n            description\n            type\n            onSale\n            slug\n            averageRating\n            reviewCount\n            image {\n              id\n              sourceUrl\n              srcSet\n              altText\n              title\n            }\n            galleryImages {\n              nodes {\n                id\n                sourceUrl\n                srcSet\n                altText\n                title\n              }\n            }\n          }\n        }\n        variation {\n          node {\n            id\n            variationId: databaseId\n            name\n            description\n            type\n            onSale\n            price\n            regularPrice\n            salePrice\n            image {\n              id\n              sourceUrl\n              srcSet\n              altText\n              title\n            }\n          }\n          attributes {\n            id\n            name\n            value\n          }\n        }\n        quantity\n        total\n        subtotal\n        subtotalTax\n      }\n    }\n    appliedCoupons {\n      code\n      discountAmount\n      discountTax\n    }\n    subtotal\n    subtotalTax\n    shippingTax\n    shippingTotal\n    total\n    totalTax\n    feeTax\n    feeTotal\n    discountTax\n    discountTotal\n  }\n}\n"],t||(t=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(t)}})));return a=function(){return e},e}var i=(0,e(1439).Ps)(a());t.Z=i},5934:function(n,t,e){"use strict";e.d(t,{Z:function(){return u}});var a="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),i=new Uint8Array(16);function r(){if(!a)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return a(i)}var o=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var l=function(n){return"string"===typeof n&&o.test(n)},s=[],d=0;d<256;++d)s.push((d+256).toString(16).substr(1));var c=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=(s[n[t+0]]+s[n[t+1]]+s[n[t+2]]+s[n[t+3]]+"-"+s[n[t+4]]+s[n[t+5]]+"-"+s[n[t+6]]+s[n[t+7]]+"-"+s[n[t+8]]+s[n[t+9]]+"-"+s[n[t+10]]+s[n[t+11]]+s[n[t+12]]+s[n[t+13]]+s[n[t+14]]+s[n[t+15]]).toLowerCase();if(!l(e))throw TypeError("Stringified UUID is invalid");return e};var u=function(n,t,e){var a=(n=n||{}).random||(n.rng||r)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t){e=e||0;for(var i=0;i<16;++i)t[e+i]=a[i];return t}return c(a)}}},function(n){n.O(0,[662,170,394,774,888,179],(function(){return t=4701,n(n.s=t);var t}));var t=n.O();_N_E=t}]);